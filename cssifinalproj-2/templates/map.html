<script>

// geocoder = new google.maps.Geocoder();
// var address = {{address}};
// 
// function codeAddress(address) {
//     var address = document.getElementById( 'address' ).value;
//     geocoder.geocode( { 'address' : address }, function( results, status ) {
//         if( status == google.maps.GeocoderStatus.OK ) {
//             map.setCenter( results[0].geometry.location );
//             var marker = new google.maps.Marker( {
//                 map     : map,
//                 position: results[0].geometry.location
//             } );
//         } else {
//             alert( 'Geocode was not successful for the following reason: ' + status );
//         }
//     } );
// }

var map;
var service;
var infowindow;

function initMap() {
  geocoder = codeAddress(address);
  map = new google.maps.Map(document.getElementById('map'), {
      center: new google.maps.location(geocoder),
      zoom: 15
    });

  var request = {
    location: new google.maps.location(geocoder),
    radius: '500',
    types: ['restaurant']
  };
	
  
  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
}


function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
}

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbZuxS12GrtS5K0x89BADspk7gyC8kTJg&callback=initMap"
async defer>

</script>

